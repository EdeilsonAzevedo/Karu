<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prontuário - Maria Clara Santos - Karu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.0/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
</head>
<body class="min-h-screen bg-base-100">
    <!-- Header -->
<div class="drawer">
    <input id="main-drawer" type="checkbox" class="drawer-toggle" />

    <div class="drawer-content flex flex-col  bg-gray-50">

        <div class="navbar bg-white border-b border-gray-200 px-4">
            <div class="navbar-start">
                <label for="main-drawer" aria-label="open sidebar" class="btn btn-square btn-ghost">
                    <i data-lucide="menu" class="w-5 h-5"></i>
                </label>
                
                <a href="/" class="flex items-center space-x-3 ml-2">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                        <i data-lucide="heart" class="w-5 h-5 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-gray-900 leading-tight">Karu</h1>
                        <p class="text-xs text-gray-500 leading-tight">Monitoramento Neonatal</p>
                    </div>
                </a>
            </div>

            <div class="navbar-end">
                <div class="dropdown dropdown-end">
                    <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
                        
                    </div>
                    
                </div>
            </div>
        </div>

    </div>

    <div class="drawer-side z-50">
        <label for="main-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
        
        <div class="p-4 h-full w-80 bg-base-100 text-base-content">
<div class="flex justify-between items-center mb-4 p-2">
  <a href="manager-dashboard.html" class="text-lg font-semibold hover:text-primary transition-colors">
    Menu Principal
  </a>
  <label for="main-drawer" class="btn btn-ghost btn-sm btn-circle">
    <i data-lucide="x" class="w-4 h-4"></i>
  </label>
</div>


            <ul class="menu text-base">
                <li><a href="search-rn.html"><i data-lucide="search" class="w-5 h-5"></i> Buscar Recém-Nascidos</a></li>
                <li><a href="adicionar-crianca.html"><i data-lucide="user-plus" class="w-5 h-5"></i> Nova Criança</a></li>
                <li><a href="gerenciar-usuarios.html"><i data-lucide="users" class="w-5 h-5"></i> Gerenciar Usuários</a></li>
                <li><a href="relatorio.html"><i data-lucide="bar-chart" class="w-5 h-5"></i> Relatórios</a></li>
                <li><a href="historico.html"><i data-lucide="history" class="w-5 h-5"></i> Histórico</a></li>
                <li><a href="logs.html"><i data-lucide="activity" class="w-5 h-5"></i> Logs do Sistema</a></li>
                <li class="menu-title"><span>Perfil</span></li>
                <li><a href="perfil.html"><i data-lucide="user" class="w-5 h-5"></i> Meu Perfil</a></li>
                <li><a href="configuracoes.html"><i data-lucide="settings" class="w-5 h-5"></i> Configurações</a></li>
                <li><a href="../index.html"><i data-lucide="log-out" class="w-4 h-4"></i>Sair</a></li>
            </ul>
        </div>
    </div>
</div>

    <!-- Patient Header -->
    <div class="px-6 py-6">
        <div class="max-w-7xl mx-auto">
            <div class="card bg-gradient-to-r from-primary/10 to-secondary/10 shadow-xl mb-8">
                <div class="card-body">
                    <div class="flex flex-col lg:flex-row justify-between items-start gap-6">
                        <div class="flex items-start gap-6">
                            <div class="avatar placeholder">
                                <div class="bg-primary text-primary-content rounded-full w-20">
                                    <span class="text-2xl font-bold">MC</span>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <h1 class="text-3xl font-bold text-base-content">Maria Clara Santos</h1>
                                <div class="flex flex-wrap gap-4 text-sm">
                                    <div class="flex items-center gap-2">
                                        <i data-lucide="calendar" class="w-4 h-4 text-primary"></i>
                                        <span><strong>Nascimento:</strong> 15/06/2025</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <i data-lucide="clock" class="w-4 h-4 text-secondary"></i>
                                        <span><strong>IG Nascimento:</strong> 32 semanas</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <i data-lucide="id-card" class="w-4 h-4 text-accent"></i>
                                        <span><strong>Certidão:</strong> 123456789012345</span>
                                    </div>
                                </div>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <div class="badge badge-success">Acompanhamento Normal</div>
                                    <div class="badge badge-info">Etapa 3 - Método Canguru</div>
                                    <div class="badge badge-outline">Aleitamento Exclusivo</div>
                                </div>
                            </div>
                        </div>
                        <div class="stats shadow bg-base-100">
                            <div class="stat">
                                <div class="stat-title">Idade Atual</div>
                                <div class="stat-value text-primary text-lg">52 dias</div>
                                <div class="stat-desc">1 mês e 22 dias</div>
                            </div>
                            <div class="stat">
                                <div class="stat-title">Idade Corrigida</div>
                                <div class="stat-value text-secondary text-lg">32d</div>
                                <div class="stat-desc">32dias</div>
                            </div>  
                        </div>
                    </div>
                    <button class="btn btn-primary mt-2" onclick="window.location.href='new-routine-consultation.html'">
                         <i data-lucide="edit" class="w-4 h-4"></i>
                         Registrar Nova Consulta
                    </button>
                </div>
            </div>

            <!-- Current Data -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Dados Atuais -->
                <div class="card bg-base-200 shadow-xl">
                    <div class="card-body">
                        <h3 class="card-title text-primary mb-4">
                            <i data-lucide="activity" class="w-5 h-5"></i>
                            Dados Atuais
                        </h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-base-content/70">Peso:</span>
                                <span class="font-semibold text-success">2,650g</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-base-content/70">Comprimento:</span>
                                <span class="font-semibold">47.2cm</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-base-content/70">PC:</span>
                                <span class="font-semibold">33.8cm</span>
                            </div>
                            <div class="divider my-2"></div>
                            <div class="flex justify-between">
                                <span class="text-base-content/70">Ganho/dia:</span>
                                <span class="font-semibold text-success">28g/dia</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-base-content/70">Última consulta:</span>
                                <span class="font-semibold">3 dias atrás</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Responsáveis -->
                <div class="card bg-base-200 shadow-xl">
                    <div class="card-body">
                        <h3 class="card-title text-secondary mb-4">
                            <i data-lucide="users" class="w-5 h-5"></i>
                            Responsáveis
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <div class="font-semibold">Ana Paula Santos</div>
                                <div class="text-sm text-base-content/70">Mãe - Tel: (82) 99401-1841</div>
                            </div>
                            <div>
                                <div class="font-semibold">Carlos Eduardo Silva</div>
                                <div class="text-sm text-base-content/70">Pai - Tel: (82) 98765-4321</div>
                            </div>
                            <div class="text-sm">
                                <strong>Endereço:</strong> Rua das Flores, 123<br>
                                Farol, Maceió - AL, 57051-000
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Equipe Responsável -->
                <div class="card bg-base-200 shadow-xl">
                    <div class="card-body">
                        <h3 class="card-title text-accent mb-4">
                            <i data-lucide="stethoscope" class="w-5 h-5"></i>
                            Equipe Responsável
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <div class="font-semibold">Dra. Ana Silva</div>
                                <div class="text-sm text-base-content/70">Médica Pediatra</div>
                            </div>
                            <div>
                                <div class="font-semibold">Enfª. Mariana Costa</div>
                                <div class="text-sm text-base-content/70">Enfermeira Especialista</div>
                            </div>
                            <div>
                                <div class="font-semibold">ACS. João Mendes</div>
                                <div class="text-sm text-base-content/70">Agente Comunitário</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Growth Charts -->
            <div class="card bg-base-200 shadow-xl mb-8">
                <div class="card-body">
                    <h3 class="card-title text-primary mb-6">
                        <i data-lucide="trending-up" class="w-6 h-6"></i>
                        Curvas de Crescimento - Intergrowth-21
                    </h3>
                    
                    <div class="tabs tabs-boxed mb-6">
                        <button class="tab tab-active" onclick="showChart('weight')">Peso</button>
                        <button class="tab" onclick="showChart('height')">Comprimento</button>
                        <button class="tab" onclick="showChart('head')">Perímetro Cefálico</button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                        <div class="lg:col-span-3">
                            <div class="bg-base-100 p-4 rounded-lg">
                                <canvas id="growthChart" height="400"></canvas>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="stats stats-vertical shadow">
                                <div class="stat">
                                    <div class="stat-title">Percentil Peso</div>
                                    <div class="stat-value text-success text-lg">P25</div>
                                    <div class="stat-desc">Normal</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-title">Percentil Comprimento</div>
                                    <div class="stat-value text-info text-lg">P50</div>
                                    <div class="stat-desc">Normal</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-title">Percentil PC</div>
                                    <div class="stat-value text-warning text-lg">P75</div>
                                    <div class="stat-desc">Normal</div>
                                </div>
                            </div>
                            <div class="alert alert-info">
                                <i data-lucide="info" class="w-4 h-4"></i>
                                <span class="text-xs">Curvas baseadas na idade corrigida para prematuros</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weight Gain Analysis -->
            <div class="card bg-base-200 shadow-xl mb-8">
                <div class="card-body">
                    <h3 class="card-title text-secondary mb-6">
                        <i data-lucide="bar-chart-3" class="w-6 h-6"></i>
                        Análise de Ganho de Peso
                    </h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <div class="bg-base-100 p-4 rounded-lg">
                                <canvas id="weightGainChart" height="200"></canvas>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="stats stats-vertical shadow">
                                <div class="stat">
                                    <div class="stat-title">Ganho Médio</div>
                                    <div class="stat-value text-success">24g/dia</div>
                                    <div class="stat-desc">Últimos 30 dias</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-title">Ganho Atual</div>
                                    <div class="stat-value text-primary">28g/dia</div>
                                    <div class="stat-desc">Última semana</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-title">Meta</div>
                                    <div class="stat-value text-info">15-30g</div>
                                    <div class="stat-desc">g/dia ideal</div>
                                </div>
                            </div>
                            <div class="alert alert-success">
                                <i data-lucide="check-circle" class="w-4 h-4"></i>
                                <span class="text-xs">Ganho de peso adequado para a idade</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Current Medications and Alerts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Medicações Atuais -->
                <div class="card bg-base-200 shadow-xl">
                    <div class="card-body">
                        <h3 class="card-title text-warning mb-4">
                            <i data-lucide="pill" class="w-5 h-5"></i>
                            Medicações Atuais
                        </h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-start">
                                <div>
                                    <div class="font-semibold">Sulfato Ferroso</div>
                                    <div class="text-sm text-base-content/70">2mg/kg/dia - 1x ao dia</div>
                                </div>
                                <div class="badge badge-success badge-sm">Ativo</div>
                            </div>
                            <div class="flex justify-between items-start">
                                <div>
                                    <div class="font-semibold">Vitamina D</div>
                                    <div class="text-sm text-base-content/70">400 UI - 1x ao dia</div>
                                </div>
                                <div class="badge badge-success badge-sm">Ativo</div>
                            </div>
                            <div class="alert alert-info">
                                <i data-lucide="calendar" class="w-4 h-4"></i>
                                <span class="text-xs">Próxima reavaliação: 15/08/2025</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alertas e Observações -->
                <div class="card bg-base-200 shadow-xl">
                    <div class="card-body">
                        <h3 class="card-title text-error mb-4">
                            <i data-lucide="alert-triangle" class="w-5 h-5"></i>
                            Alertas e Observações
                        </h3>
                        <div class="space-y-3">
                            <div class="alert alert-warning">
                                <i data-lucide="eye" class="w-4 h-4"></i>
                                <div>
                                    <div class="font-semibold">Exame Oftalmológico</div>
                                    <div class="text-xs">Agendado para 20/08/2025</div>
                                </div>
                            </div>
                            <div class="alert alert-info">
                                <i data-lucide="ear" class="w-4 h-4"></i>
                                <div>
                                    <div class="font-semibold">Teste da Orelhinha</div>
                                    <div class="text-xs">Realizado - Normal</div>
                                </div>
                            </div>
                            <div class="alert alert-success">
                                <i data-lucide="heart" class="w-4 h-4"></i>
                                <div>
                                    <div class="font-semibold">Posição Canguru</div>
                                    <div class="text-xs">6h/dia - Bem adaptada</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Consultation History -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="card-title text-primary">
                            <i data-lucide="history" class="w-6 h-6"></i>
                            Histórico de Consultas
                        </h3>
                        <div class="flex gap-2">
                            <button class="btn btn-outline btn-sm">
                                <i data-lucide="filter" class="w-4 h-4"></i>
                                Filtros
                            </button>
                            <button class="btn btn-primary btn-sm" onclick="window.location.href='new-routine-consultation.html'">
                                <i data-lucide="plus" class="w-4 h-4"></i>
                                Nova Consulta
                            </button>
                        </div>
                    </div>

                    <!-- Search and Filters -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="form-control">
                            <input type="text" placeholder="Buscar por profissional, observações..." 
                                   class="input input-bordered input-sm" id="searchConsultations">
                        </div>
                        <div class="form-control">
                            <select class="select select-bordered select-sm">
                                <option selected>Todos os tipos</option>
                                <option>Consulta Médica</option>
                                <option>Consulta Enfermagem</option>
                                <option>Visita Domiciliar</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <select class="select select-bordered select-sm">
                                <option selected>Todos os períodos</option>
                                <option>Última semana</option>
                                <option>Último mês</option>
                                <option>Últimos 3 meses</option>
                            </select>
                        </div>
                    </div>

                    <!-- Consultation Timeline -->
                    <div class="space-y-4" id="consultationHistory">
                        <!-- Consulta 1 -->
                        <div class="card bg-base-100 shadow consultationCard">
                            <div class="card-body">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="avatar placeholder">
                                            <div class="bg-primary text-primary-content rounded-full w-8">
                                                <span class="text-xs">AS</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="font-semibold">Dra. Ana Silva</div>
                                            <div class="text-sm text-base-content/70">Consulta Médica</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-semibold">03/08/2025</div>
                                        <div class="text-sm text-base-content/70">14:30</div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-3">
                                    <div>
                                        <span class="text-xs text-base-content/70">Peso:</span>
                                        <span class="font-semibold ml-1">2,650g</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">Comprimento:</span>
                                        <span class="font-semibold ml-1">47.2cm</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">PC:</span>
                                        <span class="font-semibold ml-1">33.8cm</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">Ganho:</span>
                                        <span class="font-semibold ml-1 text-success">28g/dia</span>
                                    </div>
                                </div>

                                <div class="collapse collapse-arrow">
                                    <input type="checkbox">
                                    <div class="collapse-title text-sm font-medium">
                                        Ver detalhes da consulta
                                    </div>
                                    <div class="collapse-content">
                                        <div class="space-y-2 text-sm">
                                            <div><strong>Alimentação:</strong> Aleitamento materno exclusivo, 8x/dia</div>
                                            <div><strong>Posição Canguru:</strong> 6 horas/dia</div>
                                            <div><strong>Observações:</strong> Criança ativa, boa pega, sem sinais de alerta</div>
                                            <div><strong>Conduta:</strong> Manter aleitamento, orientações sobre posição canguru</div>
                                            <div><strong>Retorno:</strong> 1 semana</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Consulta 2 -->
                        <div class="card bg-base-100 shadow consultationCard">
                            <div class="card-body">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="avatar placeholder">
                                            <div class="bg-secondary text-secondary-content rounded-full w-8">
                                                <span class="text-xs">MC</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="font-semibold">Enfª. Mariana Costa</div>
                                            <div class="text-sm text-base-content/70">Consulta Enfermagem</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-semibold">27/07/2025</div>
                                        <div class="text-sm text-base-content/70">09:15</div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-3">
                                    <div>
                                        <span class="text-xs text-base-content/70">Peso:</span>
                                        <span class="font-semibold ml-1">2,454g</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">Comprimento:</span>
                                        <span class="font-semibold ml-1">46.8cm</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">PC:</span>
                                        <span class="font-semibold ml-1">33.2cm</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">Ganho:</span>
                                        <span class="font-semibold ml-1 text-success">22g/dia</span>
                                    </div>
                                </div>

                                <div class="collapse collapse-arrow">
                                    <input type="checkbox">
                                    <div class="collapse-title text-sm font-medium">
                                        Ver detalhes da consulta
                                    </div>
                                    <div class="collapse-content">
                                        <div class="space-y-2 text-sm">
                                            <div><strong>Alimentação:</strong> Aleitamento materno exclusivo</div>
                                            <div><strong>Posição Canguru:</strong> 4-5 horas/dia</div>
                                            <div><strong>Observações:</strong> Orientações sobre pega e posição</div>
                                            <div><strong>Conduta:</strong> Aumentar tempo de posição canguru</div>
                                            <div><strong>Retorno:</strong> 1 semana</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Consulta 3 -->
                        <div class="card bg-base-100 shadow consultationCard">
                            <div class="card-body">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="avatar placeholder">
                                            <div class="bg-info text-info-content rounded-full w-8">
                                                <span class="text-xs">JM</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="font-semibold">ACS. João Mendes</div>
                                            <div class="text-sm text-base-content/70">Visita Domiciliar</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="font-semibold">20/07/2025</div>
                                        <div class="text-sm text-base-content/70">16:00</div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-3">
                                    <div>
                                        <span class="text-xs text-base-content/70">Peso:</span>
                                        <span class="font-semibold ml-1">2,300g</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">Comprimento:</span>
                                        <span class="font-semibold ml-1">46.0cm</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">PC:</span>
                                        <span class="font-semibold ml-1">32.8cm</span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-base-content/70">Ganho:</span>
                                        <span class="font-semibold ml-1 text-warning">18g/dia</span>
                                    </div>
                                </div>

                                <div class="collapse collapse-arrow">
                                    <input type="checkbox">
                                    <div class="collapse-title text-sm font-medium">
                                        Ver detalhes da consulta
                                    </div>
                                    <div class="collapse-content">
                                        <div class="space-y-2 text-sm">
                                            <div><strong>Ambiente:</strong> Domicílio adequado, família presente</div>
                                            <div><strong>Alimentação:</strong> Dificuldades iniciais com pega</div>
                                            <div><strong>Rede de Apoio:</strong> Avó materna auxiliando nos cuidados</div>
                                            <div><strong>Observações:</strong> Orientações sobre método canguru</div>
                                            <div><strong>Conduta:</strong> Encaminhamento para consulta de enfermagem</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Load More -->
                    <div class="text-center mt-6">
                        <button class="btn btn-outline btn-sm">
                            <i data-lucide="chevron-down" class="w-4 h-4"></i>
                            Carregar mais consultas
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Inicializar ícones Lucide imediatamente
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });

        let currentChart = null;
        let weightGainChart = null;

        // Dados para os gráficos
        const growthData = {
            weight: {
                labels: ['20/07', '27/07', '03/08', '06/08'],
                datasets: [{
                    label: 'Peso (g)',
                    data: [2300, 2454, 2650, 2680],
                    borderColor: 'rgb(34, 197, 94)',
                    backgroundColor: 'rgba(34, 197, 94, 0.1)',
                    tension: 0.4
                }, {
                    label: 'P10',
                    data: [2100, 2200, 2300, 2350],
                    borderColor: 'rgba(239, 68, 68, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }, {
                    label: 'P50',
                    data: [2400, 2500, 2600, 2650],
                    borderColor: 'rgba(59, 130, 246, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }, {
                    label: 'P90',
                    data: [2700, 2800, 2900, 2950],
                    borderColor: 'rgba(239, 68, 68, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }]
            },
            height: {
                labels: ['20/07', '27/07', '03/08', '06/08'],
                datasets: [{
                    label: 'Comprimento (cm)',
                    data: [46.0, 46.8, 47.2, 47.4],
                    borderColor: 'rgb(59, 130, 246)',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    tension: 0.4
                }, {
                    label: 'P10',
                    data: [44.5, 45.2, 45.8, 46.0],
                    borderColor: 'rgba(239, 68, 68, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }, {
                    label: 'P50',
                    data: [46.8, 47.5, 48.0, 48.2],
                    borderColor: 'rgba(59, 130, 246, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }, {
                    label: 'P90',
                    data: [49.0, 49.8, 50.2, 50.4],
                    borderColor: 'rgba(239, 68, 68, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }]
            },
            head: {
                labels: ['20/07', '27/07', '03/08', '06/08'],
                datasets: [{
                    label: 'PC (cm)',
                    data: [32.8, 33.2, 33.8, 34.0],
                    borderColor: 'rgb(245, 158, 11)',
                    backgroundColor: 'rgba(245, 158, 11, 0.1)',
                    tension: 0.4
                }, {
                    label: 'P10',
                    data: [31.5, 32.0, 32.5, 32.7],
                    borderColor: 'rgba(239, 68, 68, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }, {
                    label: 'P50',
                    data: [33.0, 33.5, 34.0, 34.2],
                    borderColor: 'rgba(59, 130, 246, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }, {
                    label: 'P90',
                    data: [34.5, 35.0, 35.5, 35.7],
                    borderColor: 'rgba(239, 68, 68, 0.5)',
                    borderDash: [5, 5],
                    fill: false
                }]
            }
        };

        // Função para mostrar gráfico
        function showChart(type) {
            // Atualizar tabs
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('tab-active'));
            
            // Ativar o tab correto
            if (event && event.target) {
                event.target.classList.add('tab-active');
            } else {
                // Fallback se não houver evento (chamada direta)
                const tabs = document.querySelectorAll('.tab');
                if (type === 'weight') tabs[0].classList.add('tab-active');
                if (type === 'height') tabs[1].classList.add('tab-active');
                if (type === 'head') tabs[2].classList.add('tab-active');
            }

            // Destruir gráfico anterior se existir
            if (currentChart) {
                currentChart.destroy();
            }

            const ctx = document.getElementById('growthChart');
            if (!ctx) return;
            
            currentChart = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: growthData[type],
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: `Curva de ${type === 'weight' ? 'Peso' : type === 'height' ? 'Comprimento' : 'Perímetro Cefálico'} - Intergrowth-21`
                        }
                    }
                }
            });
        }

        // Gráfico de ganho de peso
        function initWeightGainChart() {
            const canvas = document.getElementById('weightGainChart');
            if (!canvas) {
                console.error('Canvas weightGainChart não encontrado');
                return;
            }
            
            const ctx = canvas.getContext('2d');
            weightGainChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['20-27/07', '27/07-03/08', '03-06/08'],
                    datasets: [{
                        label: 'Ganho de peso (g/dia)',
                        data: [18, 22, 28],
                        backgroundColor: [
                            'rgba(245, 158, 11, 0.7)',
                            'rgba(34, 197, 94, 0.7)',
                            'rgba(34, 197, 94, 0.7)'
                        ],
                        borderColor: [
                            'rgb(245, 158, 11)',
                            'rgb(34, 197, 94)',
                            'rgb(34, 197, 94)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 40,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Ganho de Peso Entre Consultas'
                        }
                    }
                }
            });
        }

        // Função de busca nas consultas
        document.getElementById('searchConsultations').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const consultationCards = document.querySelectorAll('.consultationCard');
            
            consultationCards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Inicializar gráficos ao carregar a página
        document.addEventListener('DOMContentLoaded', function() {
            // Aguardar um pouco para garantir que o DOM está totalmente carregado
            setTimeout(() => {
                // Inicializar gráfico de crescimento (peso por padrão)
                showChart('weight');
                
                // Inicializar gráfico de ganho de peso
                initWeightGainChart();
                
                console.log('Gráficos inicializados com sucesso');
            }, 300);
        });
    </script>
</body>
</html>