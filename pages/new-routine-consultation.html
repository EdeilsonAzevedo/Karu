<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Rotina - Maria Clara Santos - Karu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.0/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="min-h-screen bg-base-100">
    <!-- Header -->
    <div class="navbar bg-base-100 shadow-lg">
        <div class="flex-1">
            <div class="flex items-center space-x-3">
                <button onclick="window.location.href='crianca-perfil.html?id=1'" class="btn btn-ghost btn-sm">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i>
                </button>
                <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center">
                    <i data-lucide="baby" class="w-6 h-6 text-primary-content"></i>
                </div>
                <span class="text-2xl font-bold text-primary">Karu</span>
                <div class="badge badge-primary">Nova Consulta</div>
            </div>
        </div>
        <div class="flex-none flex items-center gap-4">
            <button class="btn btn-outline btn-sm" onclick="salvarRascunho()">
                <i data-lucide="save" class="w-4 h-4"></i>
                Salvar Rascunho
            </button>
            <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
                    <div class="w-10 rounded-full bg-primary/20">
                        <i data-lucide="user" class="w-6 h-6 m-2 text-primary"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Breadcrumb -->
    <div class="text-sm breadcrumbs px-6 py-2 bg-base-200">
        <ul>
            <li><a href="index.html">Início</a></li>
            <li><a href="gestor-saude.html">Dashboard Gestor</a></li>
            <li><a href="crianca-perfil.html?id=1">Prontuário - Maria Clara</a></li>
            <li>Nova Consulta</li>
        </ul>
    </div>

    <!-- Patient Info Header -->
    <div class="px-6 py-4 bg-base-200">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center gap-4 bg-base-100 p-4 rounded-lg shadow">
                <div class="avatar placeholder">
                    <div class="bg-primary text-primary-content rounded-full w-12">
                        <span class="text-lg font-bold">MC</span>
                    </div>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-base-content">Maria Clara Santos</h1>
                    <div class="flex gap-4 text-sm text-base-content/70">
                        <span>Nascimento: 15/06/2025</span>
                        <span>IG: 32 semanas</span>
                        <span>Idade Corrigida: 35s + 2d</span>
                    </div>
                </div>
                <div class="ml-auto">
                    <div class="badge badge-success">Método Canguru - Etapa 3</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto p-4 max-w-4xl">
        <form class="space-y-6" onsubmit="finalizarConsulta(event)">
            <!-- 1. Identificação da Consulta -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-primary mb-4">
                        <i data-lucide="id-card" class="w-5 h-5"></i>
                        1. Identificação da Consulta
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Data da consulta</span>
                            </label>
                            <input type="date" class="input input-bordered" required value="2025-08-06">
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Local do atendimento</span>
                            </label>
                            <select class="select select-bordered" required>
                                <option disabled>Selecione</option>
                                <option selected>UBS</option>
                                <option>Visita domiciliar</option>
                                <option>Hospital</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Profissional/Cargo</span>
                            </label>
                            <input type="text" placeholder="Nome + Cargo (ACS, Enf., Médico)" class="input input-bordered" value="Dra. Ana Silva - Pediatra" required>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. Medidas Antropométricas -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-secondary mb-4">
                        <i data-lucide="ruler" class="w-5 h-5"></i>
                        2. Medidas Antropométricas
                    </h2>
                    <div class="alert alert-info mb-4">
                        <i data-lucide="info" class="w-4 h-4"></i>
                        <span>Sempre medir com a criança despida</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Peso atual (gramas)</span>
                            </label>
                            <input type="number" id="pesoAtual" placeholder="Ex: 2500" class="input input-bordered" required>
                            <label class="label">
                                <span class="label-text-alt">
                                    <input type="checkbox" class="checkbox checkbox-xs" checked> Pesado sem fralda
                                </span>
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Comprimento (cm)</span>
                            </label>
                            <input type="number" step="0.1" placeholder="Ex: 45.5" class="input input-bordered">
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Perímetro cefálico (cm)</span>
                            </label>
                            <input type="number" step="0.1" placeholder="Ex: 32.5" class="input input-bordered">
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Peso anterior (gramas)</span>
                            </label>
                            <input type="number" id="pesoAnterior" placeholder="Para cálculo do ganho" class="input input-bordered" value="2650">
                        </div>
                        <div class="stats shadow">
                            <div class="stat">
                                <div class="stat-title">Ganho médio diário</div>
                                <div class="stat-value text-secondary" id="ganhoCalculado">-- g/dia</div>
                                <div class="stat-desc">Calculado automaticamente</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Aleitamento e Amamentação -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-accent mb-4">
                        <i data-lucide="baby" class="w-5 h-5"></i>
                        3. Aleitamento e Amamentação
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Tipo alimentar</span>
                            </label>
                            <select class="select select-bordered">
                                <option disabled>Selecione</option>
                                <option selected>Aleitamento materno exclusivo</option>
                                <option>Aleitamento misto</option>
                                <option>Fórmula</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Intervalo entre mamadas</span>
                            </label>
                            <input type="text" placeholder="Ex: A cada 3h ou 8x/dia" class="input input-bordered" value="8x/dia">
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Número de fraldas em 24h</span>
                            </label>
                            <input type="number" placeholder="Quantidade" class="input input-bordered" value="8">
                            <label class="label">
                                <span class="label-text-alt text-info">≥ 6 fraldas/dia = ingestão adequada</span>
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Observação da mamada</span>
                            </label>
                            <div class="flex gap-2">
                                <label class="label cursor-pointer">
                                    <input type="radio" name="mamada" class="radio radio-success" value="ok" checked>
                                    <span class="label-text ml-2">Pega/posição OK</span>
                                </label>
                                <label class="label cursor-pointer">
                                    <input type="radio" name="mamada" class="radio radio-error" value="nao">
                                    <span class="label-text ml-2">Necessita correção</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-semibold">Uso de mamadeira/chupeta</span>
                        </label>
                        <div class="flex gap-4">
                            <label class="label cursor-pointer">
                                <input type="radio" name="bico" class="radio" value="sim">
                                <span class="label-text ml-2">Sim</span>
                            </label>
                            <label class="label cursor-pointer">
                                <input type="radio" name="bico" class="radio" value="nao" checked>
                                <span class="label-text ml-2">Não</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. Posição Canguru -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-warning mb-4">
                        <i data-lucide="heart" class="w-5 h-5"></i>
                        4. Posição Canguru
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Horas em contato pele a pele no dia</span>
                            </label>
                            <input type="number" placeholder="Ex: 6" class="input input-bordered" value="6">
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Dificuldades ou interrupções</span>
                            </label>
                            <textarea class="textarea textarea-bordered" placeholder="Comentários sobre dificuldades"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5. Sinais Clínicos de Alerta -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-error mb-4">
                        <i data-lucide="alert-triangle" class="w-5 h-5"></i>
                        5. Sinais Clínicos de Alerta
                    </h2>
                    <div class="alert alert-warning mb-4">
                        <i data-lucide="clock" class="w-4 h-4"></i>
                        <span>Verificar se houve nos últimos 2 dias</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-control">
                            <label class="label cursor-pointer">
                                <span class="label-text">Temperatura ≤ 36,5°C (hipotermia)</span>
                                <input type="checkbox" class="checkbox checkbox-error">
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label cursor-pointer">
                                <span class="label-text">Pausas respiratórias ≥ 20 seg ou cianose</span>
                                <input type="checkbox" class="checkbox checkbox-error">
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label cursor-pointer">
                                <span class="label-text">Perfusão da pele: cianose, palidez, marmórea</span>
                                <input type="checkbox" class="checkbox checkbox-error">
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label cursor-pointer">
                                <span class="label-text">Regurgitação ou vômitos frequentes</span>
                                <input type="checkbox" class="checkbox checkbox-error">
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label cursor-pointer">
                                <span class="label-text">Sinais de hipoatividade ou irritabilidade</span>
                                <input type="checkbox" class="checkbox checkbox-error">
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label cursor-pointer">
                                <span class="label-text">Icterícia visível ou persistente</span>
                                <input type="checkbox" class="checkbox checkbox-error">
                            </label>
                        </div>
                        <div class="form-control">
                            <label class="label cursor-pointer">
                                <span class="label-text">Sopro, hérnia abdominal ou fontanela abaulada</span>
                                <input type="checkbox" class="checkbox checkbox-error">
                            </label>
                        </div>
                    </div>
                    <div class="form-control mt-4">
                        <label class="label">
                            <span class="label-text font-semibold">Observações adicionais sobre sinais de alerta</span>
                        </label>
                        <textarea class="textarea textarea-bordered" placeholder="Descreva qualquer sinal observado"></textarea>
                    </div>
                </div>
            </div>

            <!-- 6. Percurso da Família e Rede de Apoio -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-info mb-4">
                        <i data-lucide="users" class="w-5 h-5"></i>
                        6. Percurso da Família e Rede de Apoio
                    </h2>
                    <div class="space-y-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Como foi a chegada em casa?</span>
                            </label>
                            <textarea class="textarea textarea-bordered" placeholder="Dificuldades ou intercorrências"></textarea>
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Quem está ajudando e de que forma?</span>
                            </label>
                            <textarea class="textarea textarea-bordered" placeholder="Rede de apoio familiar e comunitária"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 7. Perguntas-chave -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-purple-600 mb-4">
                        <i data-lucide="help-circle" class="w-5 h-5"></i>
                        7. Perguntas-chave para Avaliação
                    </h2>
                    <div class="space-y-3">
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                1. Como foi sua chegada em casa com o bebê?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                2. Teve alguma intercorrência?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                3. Está recebendo ajuda em casa? De quem?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                4. Você (e o pai) estão fazendo a posição canguru? Como e onde o bebê dorme?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                5. Como está a alimentação? Frequência das mamadas?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                6. Como estão suas mamas e produção de leite?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                7. Quantas trocas de fralda tem por dia?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                8. Que medicações foram prescritas? Quantas vezes por dia?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                        <div class="collapse collapse-arrow bg-base-100">
                            <input type="checkbox" />
                            <div class="collapse-title text-sm font-medium">
                                9. Tem alguma outra dificuldade ou dúvida?
                            </div>
                            <div class="collapse-content">
                                <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Resposta..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 8. Orientações e Conduta -->
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-success mb-4">
                        <i data-lucide="clipboard-list" class="w-5 h-5"></i>
                        8. Orientações e Conduta
                    </h2>
                    <div class="grid grid-cols-1 gap-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Orientações dadas</span>
                            </label>
                            <textarea class="textarea textarea-bordered" rows="3" placeholder="Resumo das orientações: posição canguru, mamadas, higiene, etc."></textarea>
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Plano de retorno agendado</span>
                            </label>
                            <select class="select select-bordered">
                                <option disabled>Selecione</option>
                                <option>24 horas (ganho < 15g/dia)</option>
                                <option>48 horas (dúvidas/sinais de risco)</option>
                                <option selected>1 semana (rotina normal)</option>
                                <option>2 semanas</option>
                                <option>Outro período</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Data do próximo retorno</span>
                            </label>
                            <input type="date" class="input input-bordered" value="2025-08-13">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Botões de Ação -->
            <div class="flex flex-col sm:flex-row gap-4 justify-end mb-8">
                <button type="button" class="btn btn-outline" onclick="salvarRascunho()">
                    <i data-lucide="save" class="w-4 h-4"></i>
                    Salvar Rascunho
                </button>
                <button type="submit" class="btn btn-primary">
                    <i data-lucide="check" class="w-4 h-4"></i>
                    Finalizar Consulta
                </button>
            </div>
        </form>

        <!-- Footer -->
        <div class="text-center text-sm text-base-content/60 p-4 border-t">
            <p>Baseado no Manual da Terceira Etapa do Método Canguru – Atenção Básica (Ministério da Saúde, 2015/2017)</p>
        </div>
    </div>

    <script>
        // Inicializar ícones Lucide
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });

        // Cálculo automático do ganho de peso
        function calcularGanhoPeso() {
            const pesoAtual = document.getElementById('pesoAtual').value;
            const pesoAnterior = document.getElementById('pesoAnterior').value;
            const ganhoElement = document.getElementById('ganhoCalculado');
            
            if (pesoAtual && pesoAnterior) {
                const ganho = pesoAtual - pesoAnterior;
                const ganhoDiario = Math.round(ganho / 7); // Assumindo 7 dias entre consultas
                ganhoElement.textContent = `${ganhoDiario} g/dia`;
                
                // Alertar se ganho inadequado
                if (ganhoDiario < 15) {
                    ganhoElement.className = 'stat-value text-error';
                    showToast('Atenção: Ganho de peso abaixo do esperado!', 'warning');
                } else if (ganhoDiario > 30) {
                    ganhoElement.className = 'stat-value text-warning';
                    showToast('Ganho de peso acima da média', 'info');
                } else {
                    ganhoElement.className = 'stat-value text-success';
                }
            }
        }

        // Função para mostrar toast
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `alert alert-${type} fixed top-4 right-4 w-auto z-50 shadow-lg`;
            toast.innerHTML = `
                <i data-lucide="${type === 'warning' ? 'alert-triangle' : 'info'}" class="w-4 h-4"></i>
                <span>${message}</span>
            `;
            document.body.appendChild(toast);
            lucide.createIcons();
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Salvar rascunho
        function salvarRascunho() {
            showToast('Rascunho salvo com sucesso!', 'success');
        }

        // Finalizar consulta
        function finalizarConsulta(event) {
            event.preventDefault();
            
            // Validação básica
            const pesoAtual = document.getElementById('pesoAtual').value;
            if (!pesoAtual) {
                showToast('Por favor, preencha o peso atual da criança', 'error');
                return;
            }
            
            // Simular salvamento
            showToast('Consulta finalizada com sucesso!', 'success');
            
            // Redirecionar após 2 segundos
            setTimeout(() => {
                window.location.href = 'crianca-perfil.html?id=1';
            }, 2000);
        }

        // Adicionar listeners para cálculo automático
        document.addEventListener('DOMContentLoaded', function() {
            const pesoAtualInput = document.getElementById('pesoAtual');
            const pesoAnteriorInput = document.getElementById('pesoAnterior');
            
            if (pesoAtualInput) pesoAtualInput.addEventListener('input', calcularGanhoPeso);
            if (pesoAnteriorInput) pesoAnteriorInput.addEventListener('input', calcularGanhoPeso);
        });
    </script>
</body>
</html>